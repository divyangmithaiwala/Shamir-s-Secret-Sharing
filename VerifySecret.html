<!doctype html>
<html>
<head>
	<title>Shamir's Secret Sharing Trials</title>
</head>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<body onload="onLoad()">
	<table border="0" cellpadding="1" cellspacing="1" style="width:200px;">
		<tr>
			<td><i>x<sub>0</sub></i></td>
			<td><input maxlength="4" id="x[0]" size="3" type="number" value="1" onchange="x_update(0, true)"/></td>
			<td><i>y<sub>0</sub></i></td>
			<td><input maxlength="4" id="y[0]" size="3" type="number" value="00" onchange="y_update(0, true)"/></td>
		</tr>
		<tr>
			<td><i>x<sub>1</sub></i></td>
			<td><input maxlength="4" id="x[1]" size="3" type="number" value="2" onchange="x_update(1, true)"/></td>
			<td><i>y<sub>1</sub></i></td>
			<td><input maxlength="4" id="y[1]" size="3" type="number" value="00" onchange="y_update(1, true)"/></td>
		</tr>
		<tr>
			<td><i>x<sub>2</sub></i></td>
			<td><input maxlength="4" id="x[2]" size="3" type="number" value="3" onchange="x_update(2, true)"/></td>
			<td><i>y<sub>2</sub></i></td>
			<td><input maxlength="4" id="y[2]" size="3" type="number" value="00" onchange="y_update(2, true)"/></td>
		</tr>
	</table>

	<table border="0" cellpadding="1" cellspacing="1">
		<tr>

			<!-- Calculating l0, l1, l2 values -->
			<td>
				</br>
				</br>
				<div>
				<!-- Calculating l0 -->
				<table border="0" cellpadding="1" cellspacing="1" style="width:180px;">
					<tbody>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"><i>l</i><sub>0</sub> =</td>
							<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> (<i>x - x<sub>1</sub></i>) · (<i>x - x<sub>2</sub></i>)</td>
						</tr>
						<tr>
							<td style="text-align:center"> (<i>x<sub>0</sub> - x<sub>1</sub></i>) · (<i>x<sub>0</sub> - x<sub>2</sub></i>)</td>
						</tr>
						<tr>
						</tr>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> = </td>
							<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> (<i>x</i> - <b><label id="lbl_x[1]">00</label></b>) · (<i>x</i> - <b><label id="lbl_x[2]">00</label></b>)</td>
						</tr>
						<tr>
							<td style="text-align:center"> (<b><label id="lbl_x[0]">00</label></b> - <b><label id="lbl_x[1]">00</label></b>) · (<b><label id="lbl_x[0]">00</label></b> - <b><label id="lbl_x[2]">00</label></b>)</td>
						</tr>
						<tr>
							<td></br></td>
						</tr>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> = </td>
							<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> (<i>x<sup>2</sup></i> <b><label id="lbl_l0_x_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_l0_x_constant"> - 00</label></b>)</td>
						</tr>
						<tr>
							<td style="text-align:center"> (<b><label id="lbl_l0_denom">00</label></b>)</td>
						</tr>
					</tbody>
				</table>
				</div>

				</br>
				</br>
				<div>
				<!-- Calculating l1 -->
				<table border="0" cellpadding="3" cellspacing="2" style="width:180px;">
					<tbody>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"><i>l</i><sub>1</sub> =</td>
							<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> (<i>x - x<sub>0</sub></i>) · (<i>x - x<sub>2</sub></i>)</td>
						</tr>
						<tr>
							<td style="text-align:center"> (<i>x<sub>1</sub> - x<sub>0</sub></i>) · (<i>x<sub>1</sub> - x<sub>2</sub></i>)</td>
						</tr>
						<tr>
						</tr>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> = </td>
							<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> (<i>x</i> - <b><label id="lbl_x[0]">00</label></b>) · (<i>x</i> - <b><label id="lbl_x[2]">00</label></b>)</td>
						</tr>
						<tr>
							<td style="text-align:center"> (<b><label id="lbl_x[1]">00</label></b> - <b><label id="lbl_x[0]">00</label></b>) · (<b><label id="lbl_x[1]">00</label></b> - <b><label id="lbl_x[2]">00</label></b>)</td>
						</tr>
						<tr>
							<td></br></td>
						</tr>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> = </td>
							<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> (<i>x<sup>2</sup></i> <b><label id="lbl_l1_x_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_l1_x_constant"> - 00</label></b>)</td>
						</tr>
						<tr>
							<td style="text-align:center"> (<b><label id="lbl_l1_denom">00</label></b>)</td>
						</tr>
					</tbody>
				</table>
				</div>

				</br>
				</br>
				<div>
				<!-- Calculating l2 -->
				<table border="0" cellpadding="3" cellspacing="2" style="width:180px;">
					<tbody>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"><i>l</i><sub>2</sub> =</td>
							<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> (<i>x - x<sub>0</sub></i>) · (<i>x - x<sub>1</sub></i>)</td>
						</tr>
						<tr>
							<td style="text-align:center"> (<i>x<sub>2</sub> - x<sub>0</sub></i>) · (<i>x<sub>2</sub> - x<sub>1</sub></i>)</td>
						</tr>
						<tr>
						</tr>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> = </td>
							<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> (<i>x</i> - <b><label id="lbl_x[0]">00</label></b>) · (<i>x</i> - <b><label id="lbl_x[1]">00</label></b>)</td>
						</tr>
						<tr>
							<td style="text-align:center"> (<b><label id="lbl_x[2]">00</label></b> - <b><label id="lbl_x[0]">00</label></b>) · (<b><label id="lbl_x[2]">00</label></b> - <b><label id="lbl_x[1]">00</label></b>)</td>
						</tr>
						<tr>
							<td></br></td>
						</tr>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> = </td>
							<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> (<i>x<sup>2</sup></i> <b><label id="lbl_l2_x_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_l2_x_constant"> - 00</label></b>)</td>
						</tr>
						<tr>
							<td style="text-align:center"> (<b><label id="lbl_l2_denom">00</label></b>)</td>
						</tr>
					</tbody>
				</table>
				</div>
			</td> 

			<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
			<td style="border-left:solid 1px; border-right:solid 1px">
			</td>

			<!-- Rebuilding Polynimial formula -->
			<td style="vertical-align:top">
				</br>
				</br>
				<div>
				<!-- Calculating f(x) -->
				<table border="0" cellpadding="3" cellspacing="2">
					<tbody>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right"><i>f(x)</i> =</td>
							<td style="text-align:left"> <i>y<sub>0</sub> · l<sub>0</sub>(x)</i> &nbsp;&nbsp;+&nbsp;&nbsp; <i>y<sub>1</sub> · l<sub>1</sub>(x)</i> &nbsp;&nbsp;+&nbsp;&nbsp; <i>y<sub>2</sub> · l<sub>2</sub>(x)</i></td>
						</tr>
						<tr>
							<td></br></td>
						</tr>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right"> = </td>
							<td>
							<table border="0" cellpadding="0" cellspacing="0">
								<tr>
									<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> <b><label id="lbl_y[0]">00</label></b> · </td>
									<td style="text-align:right"> &#x239B;</td>
									<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> <i>x<sup>2</sup></i> <b><label id="lbl_l0_x_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_l0_x_constant"> - 00</label></b></td>
									<td style="text-align:right"> &#x239E;</td>

									<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> <b><label id="lbl_y[1]"> &nbsp;&nbsp;+&nbsp;&nbsp; 00</label></b> · </td>
									<td style="text-align:right"> &#x239B;</td>
									<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> <i>x<sup>2</sup></i> <b><label id="lbl_l1_x_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_l1_x_constant"> - 00</label></b></td>
									<td style="text-align:right"> &#x239E;</td>

									<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> <b><label id="lbl_y[2]"> &nbsp;&nbsp;+&nbsp;&nbsp; 00</label></b> · </td>
									<td style="text-align:right"> &#x239B;</td>
									<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> <i>x<sup>2</sup></i> <b><label id="lbl_l2_x_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_l2_x_constant"> - 00</label></b></td>
									<td style="text-align:right"> &#x239E;</td>
								</tr>
								<tr>
									<td style="text-align:right"> &#x239D;</td>
									<td style="text-align:center"> <b><label id="lbl_l0_denom">00</label></b></td>
									<td style="text-align:right"> &#x23A0;</td>

									<td style="text-align:right"> &#x239D;</td>
									<td style="text-align:center"> <b><label id="lbl_l1_denom">00</label></b></td>
									<td style="text-align:right"> &#x23A0;</td>

									<td style="text-align:right"> &#x239D;</td>
									<td style="text-align:center"> <b><label id="lbl_l2_denom">00</label></b></td>
									<td style="text-align:right"> &#x23A0;</td>
								</tr>
							</table>
							</td>
						</tr>
						<tr>
							<td></br></td>
						</tr>

						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right"> = </td>
							<td>
							<table border="0" cellpadding="0" cellspacing="0">
								<tr>
									<td style="text-align:right"> &#x239B;</td>
									<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> <b><label id="lbl_l0_x_sqr_multiplier">00</label></b><i>x<sup>2</sup></i> <b><label id="lbl_l0_x_y_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_l0_x_constant"> - 00</label></b></td>
									<td style="text-align:right"> &#x239E;</td>

									<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> <b> &nbsp;&nbsp;+&nbsp;&nbsp; </b></td>
									<td style="text-align:right"> &#x239B;</td>
									<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> <b><label id="lbl_l1_x_sqr_multiplier">00</label></b><i>x<sup>2</sup></i> <b><label id="lbl_l1_x_y_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_l1_x_constant"> - 00</label></b></td>
									<td style="text-align:right"> &#x239E;</td>

									<td style="vertical-align:middle; padding:0px 5px; text-align:right" rowspan="2"> <b> &nbsp;&nbsp;+&nbsp;&nbsp; </b></td>
									<td style="text-align:right"> &#x239B;</td>
									<td style="border-bottom:solid 1px; padding:0px 5px; text-align:center"> <b><label id="lbl_l2_x_sqr_multiplier">00</label></b><i>x<sup>2</sup></i> <b><label id="lbl_l2_x_y_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_l2_x_constant"> - 00</label></b></td>
									<td style="text-align:right"> &#x239E;</td>
								</tr>
								<tr>
									<td style="text-align:right"> &#x239D;</td>
									<td style="text-align:center"> <b><label id="lbl_l0_denom">00</label></b></td>
									<td style="text-align:right"> &#x23A0;</td>

									<td style="text-align:right"> &#x239D;</td>
									<td style="text-align:center"> <b><label id="lbl_l1_denom">00</label></b></td>
									<td style="text-align:right"> &#x23A0;</td>

									<td style="text-align:right"> &#x239D;</td>
									<td style="text-align:center"> <b><label id="lbl_l2_denom">00</label></b></td>
									<td style="text-align:right"> &#x23A0;</td>
								</tr>
							</table>
							</td>
						</tr>
						<tr>
							<td></br></td>
						</tr>
						<tr>
							<td style="vertical-align:middle; padding:0px 5px; text-align:right"> = </td>
							<td style="text-align:left"> <b><label id="lbl_fx_x_sqr_multiplier">00</label></b><i>x<sup>2</sup></i> <b><label id="lbl_fx_x_multiplier"> - 00</label></b><i>x</i> <b><label id="lbl_fx_x_constant"> - 00</label></b></td>
						</tr>
						<tr>
							<td></br></td>
							<td><div id="myPlot" style="width:100%;max-width:700px;height:100%;max-height:350px"></div></td>
						</tr>
					</tbody>
				</table>
				</div>
			</td>
		</tr>
	</table>

	<script>
		var max_participent = 3;
		var x = new Array(max_participent);
		var y = new Array(max_participent);

		var fx_x_sqr_multipliers = new Array(max_participent);
		var fx_x_multipliers = new Array(max_participent);
		var fx_constants = new Array(max_participent);
		var fx_denoms = new Array(max_participent);

		var fx_x_sqr_multiplier = 0;
		var fx_x_multiplier = 0;
		var fx_constant = 0;

		function onLoad() {
			update_all_x_y();

			x_update(0, false);
			x_update(1, false);
			x_update(2, false);

			y_update(0, false);
			y_update(1, false);
			y_update(2, false);
		}

		function update_all_x_y(){
			for (var i = 0; i < max_participent; i++) {
				x[i] = parseInt(document.getElementById("x[" + i + "]").value);
				y[i] = parseInt(document.getElementById("y[" + i + "]").value);
			}
			calculateLs(0, 0, 1, 2);
			calculateLs(1, 1, 0, 2);
			calculateLs(2, 2, 0, 1);

			calculateAllFx();
		}

		function x_update(i, update_x_y = true) {
			if (update_x_y == true) {
				update_all_x_y();
			}
			var xi = document.querySelectorAll("[id='lbl_x["+i+"]']");
			var x_val = x[i];
			for (var i=0; i<xi.length; i++) {
				xi[i].innerHTML = x_val;
			}
		}

		function calculateLs(L_i, x0_i, x1_i, x2_i) {
			var l_x_multiplier = 1;
			var l_x_constant = 1;
			var l_denom = 1;

			l_x_multiplier = ((-1)*x[x1_i])+((-1)*x[x2_i]);
			if (l_x_multiplier > 0) {
				l_x_multiplier = "+&nbsp;" + l_x_multiplier;
			} else {
				l_x_multiplier = "-&nbsp;" + Math.abs(l_x_multiplier);
			}

			l_x_constant = y[L_i]*x[x1_i]*x[x2_i];
			fx_constants[L_i] = l_x_constant;
			if (l_x_constant > 0) {
				l_x_constant = "+&nbsp;" + l_x_constant;
			} else {
				l_x_constant = "-&nbsp;" + Math.abs(l_x_constant);
			}

			l_denom = (x[x0_i]-x[x1_i])*(x[x0_i]-x[x2_i]);

			fx_denoms[L_i] = l_denom;
			update_L_i(L_i, l_x_multiplier, l_x_constant, l_denom);
		}

		function update_L_i(L_i, l_x_multiplier, l_x_constant, l_denom) {
			var li_x_multiplier = document.querySelectorAll("[id='lbl_l" + L_i + "_x_multiplier']");
			for (var i=0; i<li_x_multiplier.length; i++) {
				li_x_multiplier[i].innerHTML = l_x_multiplier;
			}

			//var li_x_constant = document.querySelectorAll("lbl_l" + L_i + "_x_constant");
			var li_x_constant = document.querySelectorAll("[id='lbl_l" + L_i + "_x_constant']");
			for (var i=0; i<li_x_constant.length; i++) {
				li_x_constant[i].innerHTML = l_x_constant;
			}

			//var li_denom = document.querySelectorAll("lbl_l" + L_i + "_denom");
			var li_denom = document.querySelectorAll("[id='lbl_l" + L_i + "_denom']");
			for (var i=0; i<li_denom.length; i++) {
				li_denom[i].innerHTML = l_denom;
			}
		}

		function y_update(L_i, update_x_y = true) {
			if (update_x_y == true) {
				update_all_x_y();
			}

			var y_val = y[L_i];
			var y_sign_val = y_val;
			if (y_sign_val >= 0) {
				if (L_i > 0) {
					y_sign_val = "&nbsp;&nbsp;+&nbsp;&nbsp;" + y_sign_val;
				}
			} else {
				y_sign_val = "&nbsp;&nbsp;-&nbsp;&nbsp;" + Math.abs(y_sign_val);
			}

			var yi = document.querySelectorAll("[id='lbl_y["+L_i+"]']");
			for (var i=0; i<yi.length; i++) {
				yi[i].innerHTML = y_sign_val;
			}
			fx_x_sqr_multipliers[L_i] = y_val;
			document.getElementById("lbl_l"+L_i+"_x_sqr_multiplier").innerHTML = y_val;
		}

		function calculateAllFx() {
			calculate_y_l(0, 0, 1, 2);
			calculate_y_l(1, 1, 0, 2);
			calculate_y_l(2, 2, 0, 1);

			calculateFx();
		}

		function calculate_y_l(L_i, x0_i, x1_i, x2_i){
			var l_x_y_multiplier = ((-1)*x[x1_i])+((-1)*x[x2_i]);

			l_x_y_multiplier = y[L_i] * l_x_y_multiplier;
			fx_x_multipliers[L_i] = l_x_y_multiplier;
			if (l_x_y_multiplier >= 0) {
				l_x_y_multiplier = "+&nbsp;" + l_x_y_multiplier;
			} else {
				l_x_y_multiplier = "-&nbsp;" + Math.abs(l_x_y_multiplier);
			}

			document.getElementById("lbl_l" + L_i + "_x_y_multiplier").innerHTML = l_x_y_multiplier;
		}

		function calculateFx() {
			var fx_sqr_multiplier = 0;
			var fx_multiplier = 0;
			var fx_x_constant = 0;

			for (var i = 0; i < max_participent; i++) {
				fx_sqr_multiplier = fx_sqr_multiplier + (y[i]/fx_denoms[i]);
				fx_multiplier = fx_multiplier + (fx_x_multipliers[i]/fx_denoms[i]);
				fx_x_constant = fx_x_constant + (fx_constants[i]/fx_denoms[i]);
			}

			fx_x_sqr_multiplier = fx_sqr_multiplier;
			fx_x_multiplier = fx_multiplier;
			fx_constant = fx_x_constant;

			if (fx_sqr_multiplier < 0) {
				if (fx_sqr_multiplier == -1) {
					fx_sqr_multiplier = "-&nbsp;";
				} else {
					fx_sqr_multiplier = "-&nbsp;" + Math.abs(fx_sqr_multiplier);
				}
			} else {
				if (fx_sqr_multiplier == 1) {
					fx_sqr_multiplier = "&nbsp;";
				} else {
					fx_sqr_multiplier = "&nbsp;" + fx_sqr_multiplier;
				}
			}

			if (fx_multiplier >= 0) {
				if (fx_multiplier == 1) {
					fx_multiplier = "+&nbsp;";
				} else {
					fx_multiplier = "+&nbsp;" + fx_multiplier;
				}
			} else {
				if (fx_multiplier == -1) {
					fx_multiplier = "-&nbsp;";
				} else {
					fx_multiplier = "-&nbsp;" + Math.abs(fx_multiplier);
				}
			}

			if (fx_x_constant >= 0) {
				fx_x_constant = "+&nbsp;" + fx_x_constant;
			} else {
				fx_x_constant = "-&nbsp;" + Math.abs(fx_x_constant);
			}

			document.getElementById("lbl_fx_x_sqr_multiplier").innerHTML = fx_sqr_multiplier;
			document.getElementById("lbl_fx_x_multiplier").innerHTML = fx_multiplier;
			document.getElementById("lbl_fx_x_constant").innerHTML = fx_x_constant;

			updateChart();
		}

		function getY(x) {
			var x_squre = x*x;

			var y = (fx_x_sqr_multiplier*x_squre) + (fx_x_multiplier*x) + fx_constant;
			return y;
		}

		function updateChart() {
			// Generate values
			var max = 10;

			var xSecret = [];
			var ySecret = [];

			xSecret.push(0);
			ySecret.push(getY(0));

			var xPoints = [];
			var yPoints = [];
			var secretText = [];

			for (var i = 0; i < max_participent; i++) {
				var x_val = x[i];
				var y_val = y[i];
				xPoints.push(x_val);
				yPoints.push(y_val);
				secretText.push(x_val + "-" + y_val);
				if (max < x_val) {
					max = x_val;
				}
			}

			var xValues = [];
			var yValues = [];
			for (var i = -5; i <= max; i += 1) {
				var y_val = getY(i);
				// console.log("x: ", i);
				// console.log("y: ", y_val);
				xValues.push(i);
				yValues.push(y_val);
			}

			// Define Data
			var data = [
				{
					x: xSecret,
					y: ySecret,
					mode: 'markers',
					type:"scatter",
					name: "Secret",
					marker: {
						color: 'rgb(219, 64, 82)',
						size: 12
					}
				},
				{
					x: xValues,
					y: yValues,
					mode:"lines",
					type:"scatter",
					name: "Graph",
					line: {
						color: 'rgb(55, 128, 191)',
						width: 1
					}
				},
				{
					x: xPoints,
					y: yPoints,
					text: secretText,
					mode:"markers",
					type:"scatter",
					name: "Shared Secret",
					marker: {
						color: 'rgb(128, 0, 128)',
						size: 8
					}
				}
			];

			// Define Layout
			var layout = {title: "Polynomial"};

			// Display using Plotly
			Plotly.newPlot("myPlot", data, layout);
		}
	</script>
</body>
</html>